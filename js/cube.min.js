$(document).ready(function(){var o=0;document.body.onmousedown=function(){o=1};document.body.onmouseup=function(){o=0};var s=function(){this.enabled=false;this.cubeName=null;this.cubeContainer=null;this.setCubeName=function(x){$("#"+this.cubeName).css("display","none");this.cubeName=x;$("#"+this.cubeName).css("display","inline")};this.setActive=function(x){if(!x){$("#"+this.cubeName).css("display","none");this.cubeName=null}else{this.restartCube()}this.enabled=x};this.restartCube=function(){h=u.y;u.x=0};this.isActive=function(){return this.enabled}};var l=new s();window.cubeManager=l;var g;var q;var v={x:500,y:500};var u={x:0,y:0,z:0};var r;var e=0.25;var i=null;var j=0;var w=null;var t=null;var h=null;var d=null;var c=null;g=document.getElementById("tour_interno");q=document.getElementById("rotationContainer");window.addEventListener("deviceorientation",f);window.addEventListener("orientationchange",b);window.onmousemove=p;function b(){w=window.orientation;t=event.gamma}function p(z){z=z||window.event;var y,x;if(o){if(i){y=z.pageX-i.pageX;x=z.pageY-i.pageY;u.y+=e*y;u.x-=e*x}}if(u.x>45){u.x=45}if(u.x<-45){u.x=-45}i=z}var k=null;function f(x){if(w==null){w=window.orientation}if(t==null){t=x.gamma}if(Math.abs(x.gamma)<10){if(t*x.gamma<0){w=-w;t=x.gamma}}else{if(t*x.gamma<0){t=x.gamma}}if(x.alpha!=null){if(w==90){if(x.gamma<0){u.x=-90-x.gamma;u.y=-x.alpha}else{u.x=90-x.gamma;u.y=180-x.alpha}}else{if(w==-90){if(x.gamma<0){u.x=90+x.gamma;u.y=-x.alpha}else{u.x=-90+x.gamma;u.y=180-x.alpha}}else{if(w==0){u.x=x.beta-90;if(k!=null){var y=180-x.alpha;if(Math.abs(k-y)<10){u.y=180-x.alpha}}k=180-x.alpha}else{u.x=x.beta-90;u.y=180-x.alpha}}}if(w!=window.orientation){u.y=180+u.y}if(h==null){h=u.y}}}var n,m=null;if(!window.DeviceOrientationEvent){document.body.addEventListener("touchstart",function(x){n=x.changedTouches[0].pageX;m=x.changedTouches[0].pageY},false);document.body.addEventListener("touchmove",function(z){if(n!=null){var y=(z.changedTouches[0].pageX-n);u.y+=y/5;n=z.changedTouches[0].pageX}if(m!=null){var x=(z.changedTouches[0].pageY-m);u.x-=x/5;if(u.x>45){u.x=45}if(u.x<-45){u.x=-45}m=z.changedTouches[0].pageY}},false);document.body.addEventListener("touchend",function(x){n=null;m=null},false)}function a(){if(l.enabled){var y=0;var A,z;if(d&&d){if(Math.abs(d-u.x)<90&&Math.abs(c-u.y-h)<90){A=y*d+(1-y)*u.x;z=y*c+(1-y)*u.y-h}else{A=u.x;z=u.y-h}}else{A=u.x;z=u.y-h}d=A;c=z;if(!isie()){var x;if($(window).width()>2000){x="translate3d(0px,0px,1250px) rotateX("+A+"deg) rotateY("+z+"deg)"}else{if($(window).width()>1280){x="translate3d(0px,0px,1000px) rotateX("+A+"deg) rotateY("+z+"deg)"}else{x="translate3d(0px,0px,640px) rotateX("+A+"deg) rotateY("+z+"deg)"}}$("#"+l.cubeName+" .cube").css({transform:x,"-webkit-transform":x,"-moz-transform":x,"-ms-transform":x,"-o-transform:rotate":x})}else{window.tourManager.setIePosition(A,z)}}}window.setInterval(a,40)});