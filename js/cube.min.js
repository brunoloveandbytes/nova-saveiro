$(document).ready(function(){var n=0;document.body.onmousedown=function(){n=1};document.body.onmouseup=function(){n=0};var r=function(){this.enabled=false;this.cubeName=null;this.cubeContainer=null;this.setCubeName=function(w){$("#"+this.cubeName).css("display","none");this.cubeName=w;$("#"+this.cubeName).css("display","inline")};this.setActive=function(w){if(!w){$("#"+this.cubeName).css("display","none");this.cubeName=null}else{this.restartCube()}this.enabled=w};this.restartCube=function(){h=t.y;t.x=0};this.isActive=function(){return this.enabled}};var k=new r();window.cubeManager=k;var g;var p;var u={x:500,y:500};var t={x:0,y:0,z:0};var q;var e=0.25;var i=null;var j=0;var v=null;var s=null;var h=null;var d=null;var c=null;g=document.getElementById("tour_interno");p=document.getElementById("rotationContainer");window.addEventListener("deviceorientation",f);window.addEventListener("orientationchange",b);window.onmousemove=o;function b(){v=window.orientation;s=event.gamma}function o(y){y=y||window.event;var x,w;if(n){if(i){x=y.pageX-i.pageX;w=y.pageY-i.pageY;t.y+=e*x;t.x-=e*w}}if(t.x>45){t.x=45}if(t.x<-45){t.x=-45}i=y}function f(w){if(v==null){v=window.orientation}if(s==null){s=w.gamma}if(Math.abs(w.gamma)<10){if(s*w.gamma<0){v=-v;s=w.gamma}}else{if(s*w.gamma<0){s=w.gamma}}if(w.alpha!=null){if(v==90){if(w.gamma<0){t.x=-90-w.gamma;t.y=-w.alpha}else{t.x=90-w.gamma;t.y=180-w.alpha}}else{if(v==-90){if(w.gamma<0){t.x=90+w.gamma;t.y=-w.alpha}else{t.x=-90+w.gamma;t.y=180-w.alpha}}else{if(v==0){t.x=w.beta-90}else{t.x=w.beta-90}}}if(v!=window.orientation){t.y=180+t.y}if(h==null){h=t.y}}}var m,l=null;if(!window.DeviceOrientationEvent){document.body.addEventListener("touchstart",function(w){m=w.changedTouches[0].pageX;l=w.changedTouches[0].pageY},false);document.body.addEventListener("touchmove",function(y){if(m!=null){var x=(y.changedTouches[0].pageX-m);t.y+=x/5;m=y.changedTouches[0].pageX}if(l!=null){var w=(y.changedTouches[0].pageY-l);t.x-=w/5;if(t.x>45){t.x=45}if(t.x<-45){t.x=-45}l=y.changedTouches[0].pageY}},false);document.body.addEventListener("touchend",function(w){m=null;l=null},false)}function a(){if(k.enabled){var x=0.1;var z,y;if(d&&d){if(Math.abs(d-t.x)<90&&Math.abs(c-t.y-h)<90){z=x*d+(1-x)*t.x;y=x*c+(1-x)*t.y-h}else{z=t.x;y=t.y-h}}else{z=t.x;y=t.y-h}d=z;c=y;if(!isie()){var w;if($(window).width()>2000){w="translate3d(0px,0px,1250px) rotateX("+z+"deg) rotateY("+y+"deg)"}else{if($(window).width()>1280){w="translate3d(0px,0px,1000px) rotateX("+z+"deg) rotateY("+y+"deg)"}else{w="translate3d(0px,0px,640px) rotateX("+z+"deg) rotateY("+y+"deg)"}}$("#"+k.cubeName+" .cube").css({transform:w,"-webkit-transform":w,"-moz-transform":w,"-ms-transform":w,"-o-transform:rotate":w})}else{window.tourManager.setIePosition(z,y)}}}window.setInterval(a,40)});